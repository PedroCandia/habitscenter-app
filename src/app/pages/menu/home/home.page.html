<ion-content class="ion-padding" id="main-content">
  <div style="display: flex; align-items: center; justify-content: space-between;">
    <div style="display: flex; align-items: center;">
      <ion-avatar style="width: 35px; height: 35px; margin-left: 0.5rem;">
        <img alt="Foto de perfil de google" src="{{authSvc.getUserImageUrl()}}" />
      </ion-avatar>
      <ion-title>{{authSvc.getUserName() || 'UserName'}}</ion-title>
    </div>

    <div style="display: flex; align-items: center;">
      <ion-text (click)="openModalVIP()" slot="end" style="padding-right: .3rem; color: var(--ion-color-dark);">{{ vip ? '∞' : currentRubys }}</ion-text>
      <img (click)="openModalVIP()" slot="end" [src]="vip ? '../../../../assets/img/home/ruby_vip.png' : '../../../../assets/img/home/ruby_free.png'" style="width: 35px; height: 35px;" />
      <ion-buttons slot="start">
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
    </div>
  </div>

  <ion-list lines="none">
    @for(categoryData of categories; track $index) {
      <ion-item (click)="goToChat(categoryData)" [ngStyle]="{'--background': categoryData.color}">
        <ion-avatar>
          <img alt="{{categoryData.name}}" src="{{categoryData.url}}" />
        </ion-avatar>
        <ion-text>{{categoryData.name}}</ion-text>
      </ion-item>
    }
  </ion-list>
  <!-- <app-chat-ai [currentCategoryData]='currentCategoryData' (removeOneRuby)="removeOneRuby($event)"></app-chat-ai> -->
</ion-content>

<ion-menu contentId="main-content" side="end">
  <ion-header>
    <ion-toolbar>
      <div style="display: flex; align-items: center; margin-inline: 0.5rem;">
        <ion-menu-toggle>
          <ion-icon name="arrow-back-outline" style="font-size: 1.6rem;"></ion-icon>
        </ion-menu-toggle>
        <ion-title>Configuración</ion-title>
      </div>
    </ion-toolbar>
  </ion-header>
  <ion-content class="ion-padding">
    <ion-list lines="none" style="--background: transparent; ">
      @if(!vip) {
        <!-- <ion-label style="padding-left: 1rem;">Mejorar a VIP</ion-label> -->

        <ion-item style="--background: transparent; width: 100%;">
          <div class="vip_btn" (click)="openModalVIP()">
            <div style="color: var(--ion-color-white);">
              Mejorar a VIP
            </div>
            <div>
              <ion-icon name="chevron-forward-outline"></ion-icon>
            </div>
          </div>
        </ion-item>
      }

      <ion-item style="--background: transparent">
        <ion-label>Versión: {{ user.vip }}</ion-label>

        @if(vip) {
          <ion-icon slot="end" name="alert-circle-outline" id="top-center"></ion-icon>
        }
        <ion-popover trigger="top-center" side="top" alignment="center">
          <ng-template>
            <ion-content class="ion-padding">Para cancelar la suscripción entre a "suscripciones" en Play Store.</ion-content>
          </ng-template>
        </ion-popover>
      </ion-item>
      
      <ion-item style="--background: transparent" (click)="signOutGoogle()">
        <ion-label>Cerrar sesión</ion-label>
        <ion-icon slot="end" name="log-in-outline" style="width: 35px; height: 35px; padding: 0 0.5rem;" color="danger"></ion-icon>
      </ion-item>
    </ion-list>
  </ion-content>
</ion-menu>